// Generated by CoffeeScript 1.7.1
(function() {
  this.Index = (function() {
    function Index() {}

    Index.logoSlideOut = 'icon-right-open-big';

    Index.logoSlideIn = 'icon-left-open-big';

    Index.slideOut = 'slide-out';

    Index.slideIn = 'slide-in';

    Index.logo = '.logo';

    Index.wrapper = '#wrap';

    Index.bookmark = '.navbar li a';

    Index.animationTime = 300;

    Index.bindEvents = function() {
      $(Index.bookmark).on('click', Index.animateTo);
      $(Index.logo).on('click', Index.toggleNavBar);
      return $(window).on('resize', Index.fullscreenResize);
    };

    Index.init = function() {
      return Index.bindEvents();
    };

    Index.noNavigation = function() {
      return $(Index.wrapper).css('content') === 'nonav';
    };

    Index.calculateTopDistance = function(e) {
      var offset, section;
      section = $(e).attr('href');
      offset = 0;
      if ($(section).offset()) {
        offset = $(section).offset().top;
      }
      return $(e).attr('data-top', offset);
    };

    Index.fullscreenResize = function() {
      if (Index.noNavigation()) {
        return $(Index.wrapper).removeClass(Index.slideIn);
      }
    };

    Index.bookmarkDistanceToTop = function() {
      var link, _i, _len, _ref;
      _ref = $(Index.bookmark);
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        link = _ref[_i];
        Index.calculateTopDistance(link);
      }
      return Index.fullscreenResize();
    };

    Index.toggleNavBar = function(e) {
      if (Index.noNavigation()) {
        return;
      }
      if (e != null) {
        e.preventDefault();
      }
      if ($(Index.wrapper).hasClass(Index.slideIn)) {
        $(Index.wrapper).removeClass(Index.slideIn).addClass(Index.slideOut);
        $(Index.logo).removeClass(Index.logoSlideIn).addClass(Index.logoSlideOut);
        return $(Index.wrapper).unbind('touchmove', false);
      } else {
        $(Index.wrapper).removeClass(Index.slideOut).addClass(Index.slideIn);
        $(Index.logo).removeClass(Index.logoSlideOut).addClass(Index.logoSlideIn);
        return $(Index.wrapper).bind('touchmove', false);
      }
    };

    Index.animateTo = function(e) {
      var timeout;
      if (e != null) {
        e.preventDefault();
      }
      Index.bookmarkDistanceToTop();
      Index.toggleNavBar();
      $(Index.wrapper).attr('data-scrollto', $(e.currentTarget).attr('href'));
      timeout = Index.animationTime;
      if (Index.noNavigation()) {
        timeout = 0;
      }
      return setTimeout((function() {
        return $('html, body').animate({
          'scrollTop': $(e.currentTarget).attr('data-top')
        }, this.animationTime);
      }), timeout);
    };

    return Index;

  })();

  $(function() {
    return Index.init();
  });

}).call(this);
